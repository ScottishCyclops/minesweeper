(()=>{"use strict";function e(){c.innerText="Mines left: "+k}function n(e){const t=e.index%v==0,i=e.index%v==v-1;let l=0;e.revealed=!0,e.style.background=m;const o=[];a.forEach(n=>{const d=n.index===e.index-1&&!t,s=n.index===e.index+1&&!i,c=n.index===e.index+v,r=n.index===e.index-v,a=n.index===e.index-v-1&&!t,x=n.index===e.index+v-1&&!t,f=n.index===e.index-v+1&&!i,y=n.index===e.index+v+1&&!i;(d||s||c||r||a||x||f||y)&&(n.mine?l++:n.revealed||n.flaged||o.push(n))}),0===l?o.forEach(e=>{n(e)}):(e.firstElementChild.innerText=l,e.style.color=d(l))}function t(n){let t=a.slice();t.splice(t.indexOf(n),1);for(let e=0;e<C;e++){let e=Math.floor(Math.random()*t.length);a[a.indexOf(t[e])].mine=!0,t.splice(e,1)}e()}function i(e){y||(t(e),y=!0),e.mine?(r.innerText="GAME OVER!",l()):n(e)}function l(){a.forEach(e=>{e.onclick=null,e.oncontextmenu=null,e.mine&&(e.flaged&&e.mine?e.style.background=b:e.mine&&(e.style.background=u))})}function d(e){return e<=2?b:e<=4?w:u}const o=document.getElementsByTagName("body")[0];let s,c,r;const a=[],x=1,f=100;let y=!1;const p="#bdc3c7",m="#ecf0f1",u="#c0392b",h="#2980b9",g="#7f8c8d",b="#27ae60",w="#d35400",E=parseInt(prompt("x","16")),v=parseInt(prompt("y","16")),C=parseInt(prompt("mines","40"));let k=C,I=C;const T=window.innerHeight-f<window.innerWidth?(window.innerHeight-f)/v:window.innerWidth/E;!function(){if(s=document.createElement("div"),s.style.left=0,s.style.top=v*T+"px",s.style.width=E*T+"px",s.style.height=f+"px",s.style.display="flex",s.style.alignItems="center",s.style.justifyContent="center",o.appendChild(s),c=document.createElement("div"),c.style.width="50%",c.style.textAlign="center",s.appendChild(c),r=document.createElement("div"),r.style.width="50%",r.style.textAlign="center",s.appendChild(r),E<2||v<2)r.innerText="Invalid dimensions";else if(C>=E*v||C<1)r.innerText="Invalid mine amount";else{let n=0;for(let t=0;t<E;t++)for(let d=0;d<v;d++){const s=document.createElement("div");s.style.left=t*T+"px",s.style.top=d*T+"px",s.style.width=T+"px",s.style.height=T+"px",s.style.background=p,s.style.borderColor=g,s.style.borderStyle="solid",s.style.borderWidth=x+"px",s.style.display="flex",s.style.justifyContent="center",s.style.alignItems="center",s.style.fontWeight="bold",s.index=n,n++,s.revealed=!1,s.flaged=!1,s.mine=!1;const c=document.createElement("span");s.appendChild(c),s.oncontextmenu=(n=>(y&&(s.revealed||(s.flaged?(s.flaged=!1,s.style.background=p,k++,s.mine&&I++):(k>0&&(s.flaged=!0,s.style.background=h,k--,s.mine&&I--),0===I&&(r.innerText="YOU WON!",l())),e())),!1)),s.onclick=(e=>{s.revealed||s.flaged||i(s)}),o.appendChild(s),a.push(s)}}}()})();